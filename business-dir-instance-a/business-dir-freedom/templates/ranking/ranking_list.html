{% extends "base.html" %}
{% block title %}Rankings Â· Patriot{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="h3 m-0">Rankings</h1>
  {% if user.is_authenticated %}
    <a class="btn btn-primary btn-sm" href="{% url 'ranking:create' %}?next={{ request.get_full_path|urlencode }}">
      <i class="fa-solid fa-plus me-1"></i> New Ranking
    </a>
  {% endif %}
</div>

{% if rankings %}
  <div class="row g-3 g-md-4">
    {% for ranking in rankings %}
      <div class="col-12 col-md-6 col-lg-4">
        <article class="card h-100 shadow-sm">
          <div class="card-body">
            <h2 class="h5 mb-1">
              <a class="stretched-link" href="{{ ranking.get_absolute_url }}">{{ ranking.business.name }}</a>
            </h2>
            <div class="mb-2"><span class="badge text-bg-warning-subtle">Score {{ ranking.score }}</span></div>
            {% if ranking.comment %}
              <p class="mb-0 text-body">{{ ranking.comment|truncatewords:20 }}</p>
            {% else %}
              <p class="mb-0 text-body-secondary">No comment.</p>
            {% endif %}
          </div>
        </article>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="text-body-secondary">No rankings yet.</div>
{% endif %}
{% endblock %}
